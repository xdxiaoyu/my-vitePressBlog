# 🔍 图片加载问题排查与解决

## 📊 当前状态

### ✅ 已确认正常的部分
- public 目录位置正确（在项目根目录）
- 图片文件存在且大小正常
- VitePress 配置文件正确

### 🔧 排查步骤

## 第一步：确认开发服务器状态

1. **停止当前开发服务器**（如果正在运行）
   ```bash
   # 按 Ctrl+C 停止
   ```

2. **清理缓存并重新安装（可选）**
   ```bash
   cd /Users/dingxingxing/Desktop/项目记录文档/学习记录文档/bk/vitePressBlog
   rm -rf node_modules/.vite
   ```

3. **重新启动开发服务器**
   ```bash
   pnpm dev
   ```

## 第二步：测试图片访问

启动服务器后，在浏览器中直接访问以下 URL：

### ✅ 应该能看到图片的 URL：
- http://localhost:5173/bg.jpg
- http://localhost:5173/bg1.png
- http://localhost:5173/bg2.png
- http://localhost:5173/favicon.ico

### ✅ 测试页面：
- http://localhost:5173/test-images - 查看所有图片

如果上述 URL 无法访问，说明 public 目录配置有问题。

## 第三步：检查浏览器控制台

1. **打开浏览器开发者工具**
   - Windows/Linux: `F12` 或 `Ctrl+Shift+I`
   - Mac: `Cmd+Option+I`

2. **切换到 Console 标签**
   - 查看是否有红色错误信息

3. **切换到 Network 标签**
   - 刷新页面
   - 筛选 "Img" 类型
   - 查看哪些图片请求失败（红色）

## 🐛 常见问题与解决方案

### 问题 1：首页背景图不显示

**症状**：首页 hero 区域没有背景图

**检查**：
```bash
# 确认图片存在
ls -lh public/bg.jpg
```

**解决**：
1. 硬刷新页面：`Ctrl+F5` (Win) 或 `Cmd+Shift+R` (Mac)
2. 清除浏览器缓存
3. 重启开发服务器

### 问题 2：外部图片无法加载

**症状**：Axios 文档中的流程图显示不出来

**原因**：外部链接失效或网络问题

**解决**：
1. 检查网络连接
2. 如果图片重要，下载到 public 目录：
   ```bash
   cd public
   # 下载图片（示例）
   curl -o axios-flow.png https://xxx.com/image.png
   ```
3. 更新文档引用：`![流程图](/axios-flow.png)`

### 问题 3：图片路径 404

**症状**：浏览器显示 404 Not Found

**常见错误**：
- ❌ `![图片](./bg.jpg)` - 错误：相对路径
- ❌ `![图片](public/bg.jpg)` - 错误：包含 public
- ✅ `![图片](/bg.jpg)` - 正确：根路径

**解决**：确保所有图片路径以 `/` 开头

### 问题 4：图片太大加载慢

**症状**：图片加载时间长，页面卡顿

**检查**：
```bash
# 查看图片大小
ls -lh public/*.jpg public/*.png
```

**解决**：压缩大图片
```bash
# 使用 ImageMagick 或在线工具压缩
# bg3.jpg 有 4.6M，建议压缩到 500KB 以下
```

## 🔄 完整重启流程

如果以上都不行，执行完整重启：

```bash
# 1. 停止开发服务器（Ctrl+C）

# 2. 进入项目目录
cd /Users/dingxingxing/Desktop/项目记录文档/学习记录文档/bk/vitePressBlog

# 3. 清理缓存
rm -rf node_modules/.vite
rm -rf .vitepress/.temp
rm -rf .vitepress/cache

# 4. 重新启动
pnpm dev
```

## 📝 验证清单

启动服务器后，依次验证：

- [ ] 访问 http://localhost:5173/bg.jpg 能看到图片
- [ ] 访问 http://localhost:5173/test-images 测试页面正常
- [ ] 首页能看到背景图
- [ ] favicon 显示正常（浏览器标签页图标）
- [ ] 浏览器控制台无红色错误

## 🆘 如果问题仍然存在

请提供以下信息：

1. **浏览器控制台错误信息**（截图或文字）
2. **Network 标签中失败的请求**（URL 和状态码）
3. **具体哪些图片无法加载**
4. **是首页还是文档页面**

## 💡 临时解决方案

如果首页背景图始终无法加载，可以暂时禁用它：

编辑 `docs/index.md`：

```yaml
hero:
  name: "前端技术学习"
  text: ""
  tagline: "..."
  # image:                    ← 注释掉这部分
  #   src: /bg.jpg            ← 暂时不显示图片
  #   alt: 学习记录
  actions:
    ...
```

这样页面仍然可以正常使用，只是没有背景图而已。

---

## 🎯 快速测试命令

```bash
# 测试 public 目录是否正常
cd /Users/dingxingxing/Desktop/项目记录文档/学习记录文档/bk/vitePressBlog
pnpm dev

# 在另一个终端测试（启动服务器后）
curl -I http://localhost:5173/bg.jpg
# 应该返回 200 OK
```

